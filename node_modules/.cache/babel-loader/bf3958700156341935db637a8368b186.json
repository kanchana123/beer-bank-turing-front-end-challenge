{"ast":null,"code":"import _classCallCheck from \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/src/Components/ProductList/ProductList.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { Route } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Card, CardContent, Grid, Icon } from '@material-ui/core';\nimport { StarBorder, StarOutlined } from '@material-ui/icons';\nimport ProductDetails from '../ProductDetails/ProductDetails';\nimport { getData as _getData, getProductDetails as _getProductDetails, updateFavourites as _updateFavourites } from '../../store/actions/products';\nimport './ProductList.css';\nvar styles = {\n  root: {\n    flexGrow: 1\n  },\n  card: {\n    maxWidth: 350,\n    minWidth: 200,\n    width: 300,\n    height: 300,\n    margin: 2,\n    display: 'inline-block',\n    \"&:hover\": {\n      minWidth: 210,\n      maxWidth: 360,\n      height: 310,\n      margin: 1\n    }\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: 200,\n    maxHeight: 150\n  },\n  icon: {\n    fontSize: 32\n  }\n};\n\nvar ProductList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductList, _Component);\n\n  function ProductList(props) {\n    var _this;\n\n    _classCallCheck(this, ProductList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductList).call(this, props));\n    _this.state = {\n      products: {},\n      suggestions: [],\n      favourites: []\n    };\n    return _this;\n  }\n\n  _createClass(ProductList, [{\n    key: \"showStar\",\n    value: function showStar(isFavourite, id) {\n      var _this2 = this;\n\n      // if is favourite or is in favourites state show filled\n      if (isFavourite || _.indexOf(this.props.favourites, id) != -1) {\n        return React.createElement(StarOutlined, {\n          style: {\n            color: \"orange\"\n          },\n          className: this.props.classes.icon,\n          onClick: function onClick() {\n            _this2.props.updateFavourites(_.pull(_this2.props.favourites, id));\n\n            _this2.setState({\n              favourites: _.pull(_this2.props.favourites, id)\n            }); // console.log(\"star\", id, this.state, this.state.products[_.findIndex(this.state.products, {'id' : id})], _.findIndex(this.state.products, {'id' : id}));\n            // let index = _.findIndex(this.state.products, {'id' : id})\n            //\n            // this.setState({\n            //   products: [\n            //      ...this.state.products.slice(0,index),\n            //      Object.assign({}, this.state.products[index], {isFavourite: false}),\n            //      ...this.state.products.slice(index+1)\n            //   ]\n            // })\n\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(StarBorder, {\n          style: {\n            color: \"black\"\n          },\n          className: this.props.classes.icon,\n          onClick: function onClick() {\n            _this2.props.updateFavourites(_.concat(_this2.props.favourites, id));\n\n            _this2.setState({\n              favourites: _.concat(_this2.props.favourites, id)\n            }); // let index = _.findIndex(this.state.products, {'id' : id})\n            //\n            // this.setState({\n            //   products: [\n            //      ...this.state.products.slice(0,index),\n            //      Object.assign({}, this.state.products[index], {isFavourite: true}),\n            //      ...this.state.products.slice(index+1)\n            //   ]\n            // })\n\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        });\n      }\n    }\n  }, {\n    key: \"Product\",\n    value: function Product(name, tagline, image, isFavourite, id) {\n      var _this3 = this;\n\n      return React.createElement(Card, {\n        className: this.props.classes.card,\n        onClick: function onClick(e) {\n          console.log(\"e\", e.target, e.target.class, e.target.parentElement, e.target.className, e.target.classList);\n          console.log(\"parent\", e.target.parentNode.parentNode, e.target.parentElement.className);\n\n          if (e.target.parentElement.className != \"star\" && e.target.parentElement.tagName != \"svg\") {\n            // if (e.target.tagName == \"DIV\") {\n            // this.setState({details: this.state.products[_.findIndex(this.state.products, {'id' : id})]})\n            _this3.props.getProductDetails(id);\n\n            _this3.getSuggestions();\n\n            document.getElementById(\"productDetails\").style.display = \"block\";\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"star\",\n        style: {\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, this.showStar(isFavourite, id)), React.createElement(\"div\", {\n        className: \"product-list-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: image,\n        className: this.props.classes.img,\n        style: {\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          display: \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        style: {\n          color: \"orange\",\n          margin: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, name), React.createElement(\"h4\", {\n        style: {\n          color: \"#b3b3b3\",\n          margin: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, tagline)));\n    }\n  }, {\n    key: \"getFavData\",\n    value: function getFavData(data, favourites) {\n      return _.map(favourites, function (id) {\n        return _.find(data, {\n          'id': id\n        });\n      });\n    }\n  }, {\n    key: \"list\",\n    value: function list(data, isFav) {\n      var _this4 = this;\n\n      console.log(\"isFav\", isFav, window.location.pathname, this.props.history);\n      var favouritesData = [];\n      var d = {}; // window.location.pathname == \"/favourites\"\n\n      if (window.location.pathname == \"/favourites\") {\n        var pro = {};\n        var somedata = [];\n        setTimeout(_.map(this.props.favourites, function (id) {\n          pro = _.find(data, {\n            'id': id\n          });\n          somedata.push(pro);\n        }), 100);\n\n        if (somedata[0]) {\n          console.log(\"somedata\", somedata);\n          return _.map(somedata, function (product) {\n            if (product) {\n              return React.createElement(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                md: 4,\n                lg: 4,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 152\n                },\n                __self: this\n              }, _this4.Product(product.name, product.tagline, product.image, true, product.id));\n            }\n          });\n        } else {\n          return React.createElement(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 161\n            },\n            __self: this\n          }, \"No favourite beers.\"));\n        }\n      } else {\n        console.log(\"data reeturnd\");\n\n        if (data[0]) {\n          return _.map(data, function (product) {\n            if (product) {\n              return React.createElement(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                md: 4,\n                lg: 4,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 171\n                },\n                __self: this\n              }, _this4.Product(product.name, product.tagline, product.image, false, product.id));\n            }\n          });\n        } else {\n          return React.createElement(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179\n            },\n            __self: this\n          }, React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180\n            },\n            __self: this\n          }, \"Couldn't find any beers.\"));\n        }\n      }\n    }\n  }, {\n    key: \"getSuggestions\",\n    value: function getSuggestions(id) {\n      return this.setState({\n        suggestions: _.sampleSize(this.props.data, 3)\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getData();\n      this.props.updateFavourites();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        className: \"product-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 32,\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, this.list(this.props.data, true))), React.createElement(\"div\", {\n        id: \"productDetails\",\n        style: {\n          display: \"none\"\n        },\n        onClick: function onClick(e) {\n          console.log(\"product details\", e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(ProductDetails, {\n        product: this.props.productDetails || {},\n        suggestions: this.state.suggestions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ProductList;\n}(Component);\n\nProductList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n  productDetails: PropTypes.object.isRequired,\n  favourites: PropTypes.array.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    data: state.data || {},\n    productDetails: state.details || {},\n    favourites: state.favourites || []\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getData: function getData() {\n      return dispatch(_getData());\n    },\n    getProductDetails: function getProductDetails(id) {\n      return dispatch(_getProductDetails(id));\n    },\n    updateFavourites: function updateFavourites(favourites) {\n      return dispatch(_updateFavourites(favourites));\n    }\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(ProductList));","map":{"version":3,"sources":["/Users/kanchannannavare/Documents/beer-bank-turing-front-end-challenge/src/Components/ProductList/ProductList.js"],"names":["React","Component","connect","Route","PropTypes","_","withStyles","Card","CardContent","Grid","Icon","StarBorder","StarOutlined","ProductDetails","getData","getProductDetails","updateFavourites","styles","root","flexGrow","card","maxWidth","minWidth","width","height","margin","display","bullet","transform","title","fontSize","pos","marginBottom","img","maxHeight","icon","ProductList","props","state","products","suggestions","favourites","isFavourite","id","indexOf","color","classes","pull","setState","concat","name","tagline","image","e","console","log","target","class","parentElement","className","classList","parentNode","tagName","getSuggestions","document","getElementById","style","float","showStar","marginLeft","marginRight","data","map","find","isFav","window","location","pathname","history","favouritesData","d","pro","somedata","setTimeout","push","product","Product","sampleSize","list","productDetails","propTypes","object","isRequired","array","mapStateToProps","details","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect }          from \"react-redux\"\nimport { Route }             from \"react-router-dom\";\nimport PropTypes            from 'prop-types';\nimport _                    from 'lodash'\n\nimport { withStyles }       from '@material-ui/core/styles';\nimport  { Card, CardContent,\n          Grid, Icon }      from '@material-ui/core';\nimport { StarBorder,\n          StarOutlined }    from '@material-ui/icons';\n\nimport ProductDetails       from '../ProductDetails/ProductDetails'\n\nimport {getData,\n        getProductDetails,\n        updateFavourites }  from '../../store/actions/products'\n\nimport './ProductList.css'\n\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  card: {\n    maxWidth: 350,\n    minWidth: 200,\n    width: 300,\n    height: 300,\n    margin: 2,\n    display: 'inline-block',\n    \"&:hover\": {\n      minWidth: 210,\n      maxWidth: 360,\n      height: 310,\n      margin: 1,\n    }\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: 200,\n    maxHeight: 150,\n  },\n  icon: {\n    fontSize: 32,\n  }\n};\n\nclass ProductList extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {products: {}, suggestions: [], favourites: []}\n  }\n\n  showStar (isFavourite, id) {\n    // if is favourite or is in favourites state show filled\n    if (isFavourite || _.indexOf(this.props.favourites, id) != -1) {\n      return <StarOutlined style={{color: \"orange\"}} className={this.props.classes.icon} onClick={() => {\n          this.props.updateFavourites(_.pull(this.props.favourites, id))\n          this.setState({favourites : _.pull(this.props.favourites, id)})\n          // console.log(\"star\", id, this.state, this.state.products[_.findIndex(this.state.products, {'id' : id})], _.findIndex(this.state.products, {'id' : id}));\n          // let index = _.findIndex(this.state.products, {'id' : id})\n          //\n          // this.setState({\n          //   products: [\n          //      ...this.state.products.slice(0,index),\n          //      Object.assign({}, this.state.products[index], {isFavourite: false}),\n          //      ...this.state.products.slice(index+1)\n          //   ]\n          // })\n        }}/>\n    } else {\n      return <StarBorder style={{color: \"black\"}} className={this.props.classes.icon} onClick={() => {\n          this.props.updateFavourites(_.concat(this.props.favourites, id))\n          this.setState({favourites : _.concat(this.props.favourites, id)})\n        // let index = _.findIndex(this.state.products, {'id' : id})\n        //\n        // this.setState({\n        //   products: [\n        //      ...this.state.products.slice(0,index),\n        //      Object.assign({}, this.state.products[index], {isFavourite: true}),\n        //      ...this.state.products.slice(index+1)\n        //   ]\n        // })\n        }}/>\n    }\n  }\n\n  Product (name, tagline, image, isFavourite, id) {\n    return <Card className={this.props.classes.card} onClick={(e) => {\n                console.log(\"e\", e.target, e.target.class, e.target.parentElement, e.target.className, e.target.classList);\n                console.log(\"parent\", e.target.parentNode.parentNode, e.target.parentElement.className);\n                if (e.target.parentElement.className != \"star\" && e.target.parentElement.tagName != \"svg\") {\n                // if (e.target.tagName == \"DIV\") {\n                  // this.setState({details: this.state.products[_.findIndex(this.state.products, {'id' : id})]})\n                  this.props.getProductDetails(id)\n                  this.getSuggestions()\n                  document.getElementById(\"productDetails\").style.display = \"block\"\n                }\n              }}>\n              <CardContent>\n                <div className=\"star\" style={{float: \"right\"}}>{this.showStar(isFavourite, id)}</div>\n                <div className=\"product-list-img\">\n                  <img src={image}\n                      className={this.props.classes.img} style={{marginLeft: \"auto\", marginRight: \"auto\", display: \"block\"}}/>\n                </div>\n                <h3 style={{color: \"orange\", margin: \"10px\"}}>{name}</h3>\n                <h4 style={{color: \"#b3b3b3\", margin: \"10px\"}}>{tagline}</h4>\n              </CardContent>\n            </Card>\n  }\n\n  getFavData(data, favourites) {\n    return _.map(favourites, id => {\n      return _.find(data, {'id': id})\n    })\n  }\n\n  list(data, isFav) {\n    console.log(\"isFav\", isFav, window.location.pathname, this.props.history);\n    var favouritesData = []\n    var d = {}\n    // window.location.pathname == \"/favourites\"\n    if (window.location.pathname == \"/favourites\") {\n      var pro = {}\n      var somedata = []\n      setTimeout(_.map(this.props.favourites, id => {\n        pro = _.find(data, {'id': id})\n        somedata.push(pro)\n      }), 100)\n\n      if (somedata[0]) {\n        console.log(\"somedata\", somedata);\n        return _.map(somedata, (product) => {\n          if (product) {\n            return (\n              <Grid  item xs={12} sm={6} md={4} lg={4}>\n                {this.Product(product.name, product.tagline, product.image, true, product.id)}\n              </Grid>\n            )\n          }\n        })\n      } else {\n        return (\n          <Grid item xs={12} sm={6} md={4} lg={4}>\n            <h3>No favourite beers.</h3>\n          </Grid>\n        )\n      }\n    } else {\n      console.log(\"data reeturnd\");\n      if (data[0]) {\n        return _.map(data, product => {\n          if (product) {\n            return (\n              <Grid item xs={12} sm={6} md={4} lg={4}>\n                {this.Product(product.name, product.tagline, product.image, false, product.id)}\n              </Grid>\n            )\n          }\n        })\n      } else {\n        return (\n          <Grid item xs={12} sm={6} md={4} lg={4}>\n            <h3>Couldn't find any beers.</h3>\n          </Grid>\n        )\n      }\n\n    }\n  }\n\n  getSuggestions(id) {\n    return this.setState({suggestions: _.sampleSize(this.props.data, 3)})\n  }\n\n  componentDidMount() {\n     this.props.getData();\n     this.props.updateFavourites();\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className=\"product-list\">\n        <div className=\"products\">\n          <Grid container spacing={32} alignItems=\"center\">\n            {this.list(this.props.data, true)}\n          </Grid>\n        </div>\n        <div id=\"productDetails\" style={{display: \"none\"}} onClick={(e) => {\n            console.log(\"product details\", e);\n          }}>\n          <ProductDetails product={this.props.productDetails || {}} suggestions={this.state.suggestions} />\n        </div>\n      </div>\n    )\n  }\n}\n\nProductList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n  productDetails: PropTypes.object.isRequired,\n  favourites : PropTypes.array.isRequired\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    data : state.data || {},\n    productDetails : state.details || {},\n    favourites : state.favourites || []\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  getData       : () => dispatch(getData()),\n  getProductDetails : (id) => dispatch(getProductDetails(id)),\n  updateFavourites : (favourites) => dispatch(updateFavourites(favourites))\n})\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(ProductList));\n"]},"metadata":{},"sourceType":"module"}
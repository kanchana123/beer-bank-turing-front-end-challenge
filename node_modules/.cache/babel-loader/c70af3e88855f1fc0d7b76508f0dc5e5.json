{"ast":null,"code":"import _classCallCheck from \"/Users/kanchannannavare/Desktop/beerbank/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kanchannannavare/Desktop/beerbank/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kanchannannavare/Desktop/beerbank/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kanchannannavare/Desktop/beerbank/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kanchannannavare/Desktop/beerbank/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kanchannannavare/Desktop/beerbank/client/src/Components/ProductList/ProductList.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport _ from 'lodash';\nimport Icon from '@material-ui/core/Icon';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport StarOutlined from '@material-ui/icons/StarOutlined';\nimport ProductDetails from '../ProductDetails/ProductDetails';\nimport products from '../products';\nimport { getData as _getData, getProductDetails as _getProductDetails, updateFavourites as _updateFavourites } from '../../store/actions/products';\nimport './ProductList.css';\nvar styles = {\n  root: {\n    flexGrow: 1\n  },\n  card: {\n    maxWidth: 350,\n    minWidth: 200,\n    height: 300,\n    margin: 20\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: 200,\n    maxHeight: 150\n  },\n  icon: {\n    fontSize: 32,\n    color: \"orange\"\n  }\n}; // show stars\n// if product id is in the favourites, show bordered\n// else show starOutlines\n\nvar ProductList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductList, _Component);\n\n  function ProductList(props) {\n    var _this;\n\n    _classCallCheck(this, ProductList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductList).call(this, props));\n    _this.state = {\n      products: {},\n      suggestions: [],\n      favourites: []\n    };\n    return _this;\n  }\n\n  _createClass(ProductList, [{\n    key: \"showStar\",\n    value: function showStar(isFavourite, id) {\n      var _this2 = this;\n\n      console.log(\"star\", _.indexOf(this.props.favourites, id));\n\n      if (_.indexOf(this.props.favourites, id)) {\n        // var newFavs = this.props.favourites\n        // console.log(\"favourites\", newFavs);\n        // this.props.updateFavourites(_.concat(newFavs, id))\n        return React.createElement(StarOutlined, {\n          className: this.props.classes.icon,\n          onClick: function onClick() {\n            console.log(\"star\", _this2.state);\n\n            _this2.props.updateFavourites(_.pull(newFavs, id)); // console.log(\"star\", id, this.state, this.state.products[_.findIndex(this.state.products, {'id' : id})], _.findIndex(this.state.products, {'id' : id}));\n            // let index = _.findIndex(this.state.products, {'id' : id})\n            //\n            // this.setState({\n            //   products: [\n            //      ...this.state.products.slice(0,index),\n            //      Object.assign({}, this.state.products[index], {isFavourite: false}),\n            //      ...this.state.products.slice(index+1)\n            //   ]\n            // })\n\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(StarBorder, {\n          className: this.props.classes.icon,\n          onClick: function onClick() {\n            console.log(\"star not favourite\", _this2.state);\n            var newFavs = _this2.props.favourites;\n            console.log(\"favourites\", newFavs);\n\n            _this2.props.updateFavourites(_.concat(newFavs, id)); // this.props.setFavourite(id)\n            // let index = _.findIndex(this.state.products, {'id' : id})\n            //\n            // this.setState({\n            //   products: [\n            //      ...this.state.products.slice(0,index),\n            //      Object.assign({}, this.state.products[index], {isFavourite: true}),\n            //      ...this.state.products.slice(index+1)\n            //   ]\n            // })\n\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        });\n      }\n    } // getProductDetails(id) {\n    //   // fetch('https://api.punkapi.com/v2/beers/'+id)\n    //   // .then(response => response.json())\n    //   // .then(arr => {\n    //   //   console.log(\"detail\", _.first(arr));\n    //   //   this.setState({details: _.first(arr)})\n    //   // })\n    //\n    //   console.log(\"productDetails\", id, _.find(this.props.data, {'id': id}));\n    //\n    //   this.setState({details: _.find(this.props.data, {'id': id})})\n    //   // return _.find(this.props.data, {'id': id})\n    // }\n\n  }, {\n    key: \"Product\",\n    value: function Product(name, tagline, image, isFavourite, id) {\n      var _this3 = this;\n\n      return React.createElement(Card, {\n        className: this.props.classes.card,\n        onClick: function onClick(e) {\n          if (e.target.tagName == \"DIV\") {\n            // this.setState({details: this.state.products[_.findIndex(this.state.products, {'id' : id})]})\n            _this3.props.getProductDetails(id);\n\n            _this3.getSuggestions();\n\n            document.getElementById(\"productDetails\").style.display = \"block\";\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"star\",\n        style: {\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.showStar(isFavourite, id)), React.createElement(\"div\", {\n        className: \"product-list-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: image,\n        className: this.props.classes.img,\n        style: {\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          display: \"block\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        style: {\n          color: \"orange\",\n          margin: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, name), React.createElement(\"h4\", {\n        style: {\n          color: \"#b3b3b3\",\n          margin: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, tagline)));\n    }\n  }, {\n    key: \"list\",\n    value: function list(data, isFav) {\n      var _this4 = this;\n\n      return _.map(data, function (product) {\n        if (isFav && product.isFavourite) {\n          return React.createElement(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153\n            },\n            __self: this\n          }, _this4.Product(product.name, product.tagline, product.image, product.isFavourite, product.id));\n        } else if (!isFav) {\n          return React.createElement(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 4,\n            lg: 4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, _this4.Product(product.name, product.tagline, product.image, product.isFavourite, product.id));\n        }\n      });\n    }\n  }, {\n    key: \"getSuggestions\",\n    value: function getSuggestions(id) {\n      // fetch('https://api.punkapi.com/v2/beers')\n      // .then(response => response.json())\n      // .then(arr => {\n      //   this.setState({suggestions: arr})\n      // })\n      return this.setState({\n        suggestions: _.sampleSize(this.props.data, 3)\n      });\n    } // getBeers() {\n    //   console.log(\"search\", document.getElementById(\"search\").value);\n    //   fetch('https://api.punkapi.com/v2/beers' )\n    //     .then( response => {\n    //       return response.json();\n    //     }).then(arr => {\n    //       // Map beers\n    //       const beers = arr.map(function(drink) {\n    //\n    //         // console.log(drink);\n    //\n    //         // Grab the props we want\n    //         const beer = {\n    //           id: drink.id,\n    //           name : drink.name,\n    //           tagline : drink.tagline,\n    //           image : drink.image_url,\n    //           isFavourite: false\n    //         }\n    //\n    //         return beer\n    //       })\n    //\n    //       this.setState({products: beers})\n    //\n    //       console.log(\"state\", this.state.products);\n    //     })\n    //   }\n\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.getBeers();\n      this.props.getData(); // this.props.getProductDetails();\n\n      this.props.updateFavourites();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        className: \"product-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 32,\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, this.list(this.props.data, this.props.isFav))), React.createElement(\"div\", {\n        id: \"productDetails\",\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(ProductDetails, {\n        product: this.props.productDetails || {},\n        suggestions: this.state.suggestions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ProductList;\n}(Component);\n\nProductList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n  productDetails: PropTypes.object.isRequired,\n  favourites: PropTypes.array.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  console.log(\"state 1\", state); // this.setState({data: {\"new data\": \"new\"}})\n  // console.log(\"state 2\", state)\n\n  return {\n    data: state.data || {},\n    productDetails: state.details || {},\n    favourites: state.favourites || []\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getData: function getData() {\n      return dispatch(_getData());\n    },\n    getProductDetails: function getProductDetails(id) {\n      return dispatch(_getProductDetails(id));\n    },\n    // setFavourite : (id) => dispatch(setFavourite(id)),\n    updateFavourites: function updateFavourites(favourites) {\n      return dispatch(_updateFavourites(favourites));\n    }\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(ProductList));","map":{"version":3,"sources":["/Users/kanchannannavare/Desktop/beerbank/client/src/Components/ProductList/ProductList.js"],"names":["React","Component","connect","PropTypes","withStyles","Card","CardContent","Grid","_","Icon","StarBorder","StarOutlined","ProductDetails","products","getData","getProductDetails","updateFavourites","styles","root","flexGrow","card","maxWidth","minWidth","height","margin","bullet","display","transform","title","fontSize","pos","marginBottom","img","maxHeight","icon","color","ProductList","props","state","suggestions","favourites","isFavourite","id","console","log","indexOf","classes","pull","newFavs","concat","name","tagline","image","e","target","tagName","getSuggestions","document","getElementById","style","float","showStar","marginLeft","marginRight","data","isFav","map","product","Product","setState","sampleSize","list","productDetails","propTypes","object","isRequired","array","mapStateToProps","details","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect }                  from \"react-redux\"\n\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport _ from 'lodash'\nimport Icon from '@material-ui/core/Icon';\nimport StarBorder from '@material-ui/icons/StarBorder';\nimport StarOutlined from '@material-ui/icons/StarOutlined';\n\nimport ProductDetails from '../ProductDetails/ProductDetails'\n\nimport products from '../products'\n\nimport {getData, getProductDetails, updateFavourites} from '../../store/actions/products'\n\n\n\n\nimport './ProductList.css'\n\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  card: {\n    maxWidth: 350,\n    minWidth: 200,\n    height: 300,\n    margin: 20\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: 200,\n    maxHeight: 150,\n  },\n  icon: {\n    fontSize: 32,\n    color: \"orange\"\n  }\n};\n\n\n// show stars\n// if product id is in the favourites, show bordered\n// else show starOutlines\n\n\n\nclass ProductList extends Component {\n\n  constructor(props) {\n    super(props)\n\n    this.state = {products: {}, suggestions: [], favourites: []}\n  }\n\n  showStar (isFavourite, id) {\n    console.log(\"star\", _.indexOf(this.props.favourites, id));\n    if (_.indexOf(this.props.favourites, id)) {\n      // var newFavs = this.props.favourites\n      // console.log(\"favourites\", newFavs);\n      // this.props.updateFavourites(_.concat(newFavs, id))\n      return <StarOutlined className={this.props.classes.icon} onClick={() => {\n          console.log(\"star\", this.state);\n          this.props.updateFavourites(_.pull(newFavs, id))\n\n          // console.log(\"star\", id, this.state, this.state.products[_.findIndex(this.state.products, {'id' : id})], _.findIndex(this.state.products, {'id' : id}));\n          // let index = _.findIndex(this.state.products, {'id' : id})\n          //\n          // this.setState({\n          //   products: [\n          //      ...this.state.products.slice(0,index),\n          //      Object.assign({}, this.state.products[index], {isFavourite: false}),\n          //      ...this.state.products.slice(index+1)\n          //   ]\n          // })\n        }}/>\n    } else {\n      return <StarBorder className={this.props.classes.icon} onClick={() => {\n          console.log(\"star not favourite\", this.state);\n          var newFavs = this.props.favourites\n          console.log(\"favourites\", newFavs);\n          this.props.updateFavourites(_.concat(newFavs, id))\n          // this.props.setFavourite(id)\n        // let index = _.findIndex(this.state.products, {'id' : id})\n        //\n        // this.setState({\n        //   products: [\n        //      ...this.state.products.slice(0,index),\n        //      Object.assign({}, this.state.products[index], {isFavourite: true}),\n        //      ...this.state.products.slice(index+1)\n        //   ]\n        // })\n        }}/>\n    }\n  }\n\n  // getProductDetails(id) {\n  //   // fetch('https://api.punkapi.com/v2/beers/'+id)\n  //   // .then(response => response.json())\n  //   // .then(arr => {\n  //   //   console.log(\"detail\", _.first(arr));\n  //   //   this.setState({details: _.first(arr)})\n  //   // })\n  //\n  //   console.log(\"productDetails\", id, _.find(this.props.data, {'id': id}));\n  //\n  //   this.setState({details: _.find(this.props.data, {'id': id})})\n  //   // return _.find(this.props.data, {'id': id})\n  // }\n  Product (name, tagline, image, isFavourite, id) {\n    return <Card className={this.props.classes.card} onClick={(e) => {\n        if (e.target.tagName == \"DIV\") {\n          // this.setState({details: this.state.products[_.findIndex(this.state.products, {'id' : id})]})\n          this.props.getProductDetails(id)\n          this.getSuggestions()\n          document.getElementById(\"productDetails\").style.display = \"block\"\n        }\n      }}>\n      <CardContent>\n        <div className=\"star\" style={{float: \"right\"}}>{this.showStar(isFavourite, id)}</div>\n        <div className=\"product-list-img\">\n          <img src={image}\n              className={this.props.classes.img} style={{marginLeft: \"auto\", marginRight: \"auto\", display: \"block\"}}/>\n        </div>\n        <h3 style={{color: \"orange\", margin: \"10px\"}}>{name}</h3>\n        <h4 style={{color: \"#b3b3b3\", margin: \"10px\"}}>{tagline}</h4>\n      </CardContent>\n    </Card>\n  }\n\n  list(data, isFav) {\n      return _.map(data, (product) => {\n        if (isFav && product.isFavourite) {\n          return (\n            <Grid item xs={12} sm={6} md={4} lg={4}>\n              {this.Product(product.name, product.tagline, product.image, product.isFavourite, product.id)}\n            </Grid>\n          )\n        } else if (!isFav) {\n          return (\n            <Grid item xs={12} sm={6} md={4} lg={4}>\n              {this.Product(product.name, product.tagline, product.image, product.isFavourite, product.id)}\n            </Grid>\n          )\n        }\n\n      })\n  }\n\n  getSuggestions(id) {\n    // fetch('https://api.punkapi.com/v2/beers')\n    // .then(response => response.json())\n    // .then(arr => {\n    //   this.setState({suggestions: arr})\n    // })\n    return this.setState({suggestions: _.sampleSize(this.props.data, 3)})\n  }\n\n  // getBeers() {\n  //   console.log(\"search\", document.getElementById(\"search\").value);\n  //   fetch('https://api.punkapi.com/v2/beers' )\n  //     .then( response => {\n  //       return response.json();\n  //     }).then(arr => {\n  //       // Map beers\n  //       const beers = arr.map(function(drink) {\n  //\n  //         // console.log(drink);\n  //\n  //         // Grab the props we want\n  //         const beer = {\n  //           id: drink.id,\n  //           name : drink.name,\n  //           tagline : drink.tagline,\n  //           image : drink.image_url,\n  //           isFavourite: false\n  //         }\n  //\n  //         return beer\n  //       })\n  //\n  //       this.setState({products: beers})\n  //\n  //       console.log(\"state\", this.state.products);\n  //     })\n  //   }\n\n  componentDidMount() {\n     // this.getBeers();\n     this.props.getData();\n     // this.props.getProductDetails();\n     this.props.updateFavourites();\n  }\n\n\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className=\"product-list\">\n        <div className=\"products\">\n          <Grid container spacing={32} alignItems=\"center\">\n            {this.list(this.props.data, this.props.isFav)}\n          </Grid>\n        </div>\n        <div id=\"productDetails\" style={{display: \"none\"}}>\n          <ProductDetails product={this.props.productDetails || {}} suggestions={this.state.suggestions} />\n        </div>\n      </div>\n    )\n  }\n}\n\nProductList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n  productDetails: PropTypes.object.isRequired,\n  favourites : PropTypes.array.isRequired\n};\n\nconst mapStateToProps = (state) => {\n  console.log(\"state 1\", state)\n  // this.setState({data: {\"new data\": \"new\"}})\n  // console.log(\"state 2\", state)\n\n  return {\n    data : state.data || {},\n    productDetails : state.details || {},\n    favourites : state.favourites || []\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  getData       : () => dispatch(getData()),\n  getProductDetails : (id) => dispatch(getProductDetails(id)),\n  // setFavourite : (id) => dispatch(setFavourite(id)),\n  updateFavourites : (favourites) => dispatch(updateFavourites(favourites))\n\n})\n\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(ProductList));\n"]},"metadata":{},"sourceType":"module"}